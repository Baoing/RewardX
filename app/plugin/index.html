<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RewardX Plugin - å¼€å‘é¢„è§ˆ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
          'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: #f5f5f5;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        background: white;
        padding: 24px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1 {
        font-size: 28px;
        margin-bottom: 8px;
        color: #1a1a1a;
      }

      .subtitle {
        color: #666;
        font-size: 14px;
      }

      .preview-section {
        background: white;
        border-radius: 8px;
        padding: 40px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        min-height: 600px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }

      .info {
        margin-top: 20px;
        padding: 16px;
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        border-radius: 4px;
        font-size: 14px;
        line-height: 1.6;
      }

      .info h3 {
        font-size: 16px;
        margin-bottom: 8px;
        color: #1976d2;
      }

      .code {
        margin-top: 12px;
        padding: 12px;
        background: #263238;
        border-radius: 4px;
        overflow-x: auto;
      }

      .code pre {
        color: #aed581;
        font-family: 'Courier New', monospace;
        font-size: 12px;
        line-height: 1.6;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ RewardX Plugin - å¼€å‘é¢„è§ˆ</h1>
        <p class="subtitle">ä¹å®«æ ¼æŠ½å¥–æ¸¸æˆç»„ä»¶ - æœ¬åœ°å¼€å‘ç¯å¢ƒ</p>
      </div>

      <div class="preview-section">
        <!-- ç»„ä»¶å®¹å™¨ -->
        <div id="rewardx-lottery-preview"></div>
      </div>

      <div class="info">
        <h3>ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
        <p>
          è¿™æ˜¯å®¢æˆ·ç«¯æŠ½å¥–ç»„ä»¶çš„å¼€å‘é¢„è§ˆé¡µé¢ã€‚ç»„ä»¶ä¼šè¢«æ‰“åŒ…æˆ IIFE æ ¼å¼ï¼Œ
          å¯ä»¥ç›´æ¥åœ¨ Shopify Storefront ä¸­ä½¿ç”¨ã€‚
        </p>
        <div class="code">
          <pre># å¼€å‘æ¨¡å¼ï¼ˆçƒ­æ›´æ–°ï¼‰
npm run dev:plugin

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build:plugin

# æ„å»ºäº§ç‰©ä½ç½®
extensions/lottery-game/assets/lottery-game.js</pre>
        </div>
      </div>

      <div class="info">
        <h3>ğŸ’¡ åœ¨ Admin ä¸­ä½¿ç”¨</h3>
        <div class="code">
          <pre>import { LotteryModal } from "@plugin/main"

&lt;LotteryModal
  campaign={campaign}
  onPrizeWon={(prize) => console.log(prize)}
/&gt;</pre>
        </div>
      </div>
    </div>

    <script type="module">
      // æ¨¡æ‹Ÿæ´»åŠ¨æ•°æ®ç”¨äºé¢„è§ˆ
      const mockCampaign = {
        id: "demo",
        userId: "user-1",
        name: "Black Friday Lottery",
        type: "order",
        gameType: "ninebox",
        isActive: true,
        content: {
          title: "Black Friday æŠ½å¥–æ´»åŠ¨",
          description: "ä¸‹å•åå³å¯å‚ä¸æŠ½å¥–ï¼Œèµ¢å–ä¸°åšå¥–å“ï¼",
          inputTitle: "è¯·è¾“å…¥æ‚¨çš„è®¢å•å· (ä¾‹å¦‚ #HTVRONT1234567)",
          inputPlaceholder: "è¯·è¾“å…¥æ‚¨çš„è®¢å•å·",
          inputEmptyError: "è¯·è¾“å…¥æ‚¨çš„è®¢å•å· (ä¾‹å¦‚ #HTVRONT1234567)",
          buttonText: "åŠ å…¥",
          rulesText1: "1. ä¸‹å•å10åˆ†é’Ÿå³å¯å‚åŠ æŠ½å¥–;\n- é»‘è‰²æ˜ŸæœŸäº”æ´»åŠ¨æœŸé—´åœ¨å…¨ç«™ä¸‹çš„ä»»ä½•è®¢å•å‡å¯å‚ä¸æŠ½å¥–;\nä¸€æ¬¡ä¸‹å•,ä¸€æ¬¡æœºä¼šã€‚",
          rulesText2: "2. å¥–å“:5ç¾å…ƒä¼˜æƒ åˆ¸(æ— æœ€ä½æ¶ˆè´¹)/10ç¾å…ƒä¼˜æƒ åˆ¸(æ— æœ€ä½æ¶ˆè´¹)/A200 è‡ªåŠ¨æ»šç­’çƒ­å‹æœº/è‡ªåŠ¨çƒ­å‹æœº2/ iPhone 17/æ„Ÿè°¢æ‚¨çš„å‚ä¸!"
        },
        styles: {
          titleColor: "#000000",
          mainBackgroundColor: "#fff",
          mainTextColor: "#000",
          moduleContainerBackgroundColor: "#FFCFA7",
          moduleBorderColor: "#FF841F",
          moduleDotsColor: "#FFCFA7",
          moduleMainBackgroundColor: "#1A0202",
          moduleCardBackgroundColor: "#fff",
          moduleButtonColor: "#8B4513",
          footerTextColor: "#fff"
        },
        prizes: [
          {
            id: "1",
            label: "% SALE $5 OFF COUPON",
            type: "discount_fixed",
            discountValue: 5,
            chancePercentage: 20,
            totalStock: 100,
            usedStock: 0
          },
          {
            id: "2",
            label: "% SALE $10 OFF COUPON",
            type: "discount_fixed",
            discountValue: 10,
            chancePercentage: 15,
            totalStock: 50,
            usedStock: 0
          },
          {
            id: "3",
            label: "Auto Heat Press 2",
            type: "free_gift",
            chancePercentage: 5,
            totalStock: 10,
            usedStock: 0,
            image: "https://via.placeholder.com/150?text=Heat+Press"
          },
          {
            id: "4",
            label: "A200 Auto Tumbler Heat Press",
            type: "free_gift",
            chancePercentage: 5,
            totalStock: 10,
            usedStock: 0,
            image: "https://via.placeholder.com/150?text=Tumbler"
          },
          {
            id: "5",
            label: "iPhone 17",
            type: "free_gift",
            chancePercentage: 1,
            totalStock: 1,
            usedStock: 0,
            image: "https://via.placeholder.com/150?text=iPhone"
          },
          {
            id: "6",
            label: "Thanks for Your Participation!",
            type: "no_prize",
            chancePercentage: 54,
            totalStock: null,
            usedStock: 0
          }
        ],
        allowedOrderStatus: "paid",
        requireOrder: false,
        requireName: false,
        requirePhone: false,
        gameConfig: "{}",
        totalPlays: 0,
        totalWins: 0,
        totalOrders: 0,
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString()
      }

      // ç­‰å¾…æ¨¡å—åŠ è½½åæ¸²æŸ“
      import("/main.tsx").then((module) => {
        const container = document.getElementById("rewardx-lottery-preview")
        if (container && module.renderLotteryPreview) {
          module.renderLotteryPreview(container, mockCampaign)
        }
      })
    </script>
  </body>
</html>
